---
title: "Cookie와 Session의 차이 (+WebStorage)"
date: 2021-07-22 17:27:22 -0400
categories: study
---

----
1. Cookie (4KB)
- 만료기한이 있는 키값 저장소
- 쿠키는 사이트를 방문하고 이용할때 브라우저에 저장되는 내용
- 내가 갖고있는 내용, 내가 임의로 고치거나 지울수 있고 남이 훔쳐보거나 도둑질 하기도 쉽다
- 한개의 도메인에 한정된다(페북 -> 페북, 네이버 -> 네이버)
- 쿠키는 자동으로 보내고 저장한다

2. Session
- 쿠키를 기반으로 하지만 사용자 정보를 서버측에서 관리
- 클라이언트를 구분하기위해 세션 id를 부여하여 웹브라우저가 종료될때까지 인증상태를 유지
- 사용자 정보를 서버에 두기때문에 쿠키보다 보안이 좋지만 사용자가 많아질수록 서버 메모리를 많이 차지해 서버에 부하가 올 수 있다


 3. 웹 스토리지(모바일은 2.5MB, 데스크탑은 5MB ~ 10MB)
 - 쿠키의 단점을 보완하기 위해 HTML5에서 추가된 키밸류 저장소
 - 서버에 필요하지 않은 정보들을 저장하기 위한 저장소
 - 로컬스토리지 : 사용자가 지우지 않는한 영구 보존되고
 - 세션스토리지 : 웹페이지를 닫으면 내용 저장

* 쿠키의 단점 : 쿠키는 서버에 불필요한 데이터를 포함하여 담고있는 모든 데이터를 서버로 보냄, 그러한 서버에 불필요한 데이터를 저장하기 위한 저장소가 웹 

++ Session 기반 웹 어플리케이션의 문제 및 해결
Session을 기반으로 하는 웹 어플리케이션에서 여러대의 서버를 사용할 경우 발생하는 문제가 있다.
로그인 이후 요청이 클라이언트의 Session 정보를 저장하고 있는 서버가 아닌 다른 서버에 Load Balancing 되는 경우이다.
이 경우 클라이언트의 정보를 인식하지 못해 다시 로그인 창을 리다이렉트 할 수 있다.

이러한 문제를 해결하는 방법으로
- Sticky Session : 특정 세션의 요청을 처음 처리한 서버로만 보내는 것
 => Load Balancing이 적절하게 수행되지 않음, 한 서버의 과부하가 올 수 있음, 서버 다운 시 세션이 유실될 수 있음
- Session Clustering : 서버들끼리 세션정보를 공유
 => 관리의 어려움, 프로그램 병렬화의 어려움
- Session Storage 분리 : 기존 서버가 갖고있는 로컬 세션 저장소를 이용하는 것이 아닌 별도의 세션 저장소를 사용하는 것
 => Session Storage 다운 시 전체 서버 사용 불가, 
 
----

쿠키와 세션 그리고 웹 저장소에 대해 

감사합니다!
